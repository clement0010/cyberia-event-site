mutation UpdateParticipantDetails($description: String!, $name: String!) {
  update_participants(where: {}, _set: {description: $description, name: $name}) {
    affected_rows
    returning {
      description
      name
      role
      team_id
      user_id
      team {
        motto
        name
        picture_url
      }
    }
  }
}

mutation UpdateGameScore($game_id: uuid!, $score: Int!, $team_id: uuid!) {
  update_teams_scores(where: {game_id: {_eq: $game_id}, team_id: {_eq: $team_id}}, _set: {score: $score}) {
    affected_rows
  }
}

mutation SubmitContest($submission_url: String!, $participant_id: uuid!) {
  insert_contest(objects: {submission_url: $submission_url, participant_id: $participant_id}) {
    affected_rows
  }
  update_participants(where: {}, _set: {submission: true}) {
    affected_rows
  }
}

mutation SubmitContestVote($participant_id: uuid!) {
  update_contest(where: {participant_id: {_eq: $participant_id}}, _inc: {vote_count: 1}) {
    affected_rows
  }
  update_participants(where: {}, _set: {vote: true}) {
    affected_rows
  }
}

mutation SubmissionControl($submission: Boolean) {
  update_participants(where: {}, _set: {submission: $submission}) {
    affected_rows
  }
}

mutation VotingControl($vote: Boolean) {
  update_participants(where: {}, _set: {vote: $vote}) {
    affected_rows
  }
}
